\documentclass[a4paper, 10pt]{article}

\usepackage{cite}
\usepackage{color}
	\definecolor{gray}{rgb}{0.5,0.5,0.5}
\usepackage{fancyvrb}
\usepackage{graphicx}
\graphicspath{{images/}}
\DeclareGraphicsExtensions{.pdf,.png}
%\usepackage{hyperref}
\usepackage{latexsym}
\usepackage{listings}
	\lstset{
		frame=single,
		numbers=left,
		numberstyle=\small\color{gray},
		tabsize=4,
		morekeywords={if, else, do, while, mod, and},
	}
\usepackage{multirow}
\usepackage{setspace}
\usepackage{url}

\def \todo#1{\textcolor{blue}{#1}}

\title{Development and Analysis of Barrier Protocols}
\author{Ronny Brendel\\Tutors: Sascha Kl\"uppelholz, Marcus V\"olp}

\begin{document}
\maketitle

\pagebreak

\tableofcontents

\pagebreak

\begin{abstract}
\end{abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
\begin{itemize}
	\item general introduction
	\item what is a barrier
	\item usage example for barriers. Reference rab00.
	\item motivation for researching barrier
	\item ?historical development?
	\item ?overarching thesis that will be worked on. Add a claim as recurrent theme.?
	\item what this report will be about
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Currently used barriers}

\subsection{shared memory}
\begin{itemize}
	\item explain short why only these two, closed source intel, microsoft, portland, pthreads und openmp weit verbreitet
	\item libgomp
	\item glibc's new pthreads library
	\item ?how is resetting handled?
	\item pick add-fetch as contender in this category
\end{itemize}

\subsection{distributed memory}
\begin{itemize}
	\item explain short why only MPI
	\item openmpi
	\item mpich and derivatives
	\item ?how is resetting handled?
	\item pick dissemination as contender in this category
	\item more?
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Survey of ?ways? to implement barrier protocols}
\begin{itemize}
	\item before thinking about barrier protocols we should evaluate what tools we have at our disposal to realize those protocols
	\item shared vs distributed memory
	\item shared: weaken memory model (aqc/rel model)
	\item the influence of latency
	\item APIs. in the end it will be two broad categories. remote memory access and synchronous message passing. from a protocol point of view asynchronous message passing and remote memory access are very similar.
\end{itemize}

\subsection{shared memory}
\begin{itemize}
	\item normal load/store
	\item atomic ops
	\item ?hardware support?
\end{itemize}

\subsection{distributed memory}
MPI only
\begin{itemize}
	\item send/recv
	\item isend/irecv
	\item icollectives
	\item rdma - largest part
	\item ?hardware support?
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Three new barriers}
\subsection{NMC/Ronny}
\begin{itemize}
	\item reference old work
	\item mention errors -$>$ correction
	\item improvement (remember others)
	\item still slow and inefficient
	\item resetting included in the protocol
	\item advantage: no atomic ops
	\item + variations: array based for more than 64 threads
\end{itemize}

\subsection{Ronny simple for shared memory}
\begin{itemize}
	\item advantage: no atomic ops
	\item much shared read communication but low computation overhead
	\item ?discuss a variant with reset?, if not at least mention that reset is not handled here
	\item + variations: remember first few, remember last few, more?
\end{itemize}

\subsection{Ronny fancy for dist memory}
\begin{itemize}
	\item advantage: no atomic ops
	\item trades computational overhead for, less shared read communication than the simple variant
	\item ?discuss a variant with reset?, if not at least mention that reset is not handled here
	\item + variations: which?
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Analysis and comparison of the contenders}

\begin{itemize}
	\item pick add-fetch as contender for shared mem
	\item pick dissemination as contender for distributed mem
\end{itemize}

\subsection{Prose}
\begin{itemize}
	\item meantion that no backoff is used
\end{itemize}

\subsubsection{add-fetch for shared memory}
\subsubsection{ronny simple for shared memory}
\subsubsection{dissemination for distributed memory}
\begin{itemize}
	\item number of messages sent vs the minimum necessary
	\item progress problem when one process is missing
	\item meantion the xeon phi work of TH
\end{itemize}
\subsubsection{ronny fancy for distributed memory}
\begin{itemize}
	\item ?number of messages sent?
\end{itemize}

\subsection{Benchmarks}
\begin{itemize}
	\item add-fetch vs ronny simple
	\item do not do dissemination vs ronny fancy
	\item ?rapl?
\end{itemize}

\subsection{Model checking}
\subsubsection{Qualitative Properties (correctness)}
\begin{itemize}
	\item threads may only exit the barrier if all threads are present
	\item the protocol must always terminate, or in other words: if all threads are present, they will all exit the barrier in a finite amount of time"
\end{itemize}
\subsubsection{Quantitative Properties}
\begin{itemize}
	\item add-fetch vs ronny simple
	\item dissemination vs ronny fancy
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Proposal: Dissecting barrier protocols into orthogonal parts}
Cut up existing barriers into orthogonal pieces. Analyse and replace them independently.
\begin{itemize}
	\item more or less intelligence / bandwidth/latency vs additional calculations
	\item 
		reset

		\begin{itemize}
			\item how is resetting handled in currently used barriers?
			\item switching between barriers using a variable (as in the mcquire/ronny barrier - 'left' variable)
			\item use 3 barriers reset barrier x+2 when you finished barrier x. switch between the barriers by checking if barrier x+2 is reset or not (as in add-fetch-with-reset)
			\item if variable space permits it you can also change the variables to 'counters' and modify all checks to ask for numbers modulo round + a check that you are in the proper round
		\end{itemize}

	\item back-off
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}
\begin{itemize}
	\item condense results into a small passage
	\item ?repeat claim - overarching thesis - present an answer?
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Future Work}
\begin{itemize}
	\item evaluate back-off strategies. mwait.
	\item model check more and bigger. symmetrie reduction. partial order reduction.
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagebreak

\appendix
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Glossary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\listoffigures

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\listoftables

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\nocite{*} % insert not cited references
\bibliographystyle{abbrv}
\bibliography{references}{}

\end{document}
