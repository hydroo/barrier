\begin{center}
\begin{minipage}{\textwidth}
\begin{lstlisting}[mathescape, linewidth=10.1cm]
shared variables: boolean barrier[threadCount]
local variables:  integer i
initialization:   barrier[*] := false
$\listingrule{10.1cm}$

barrier[threadIndex] := true

i := 0
while i < threadCount {
	if barrier[i] = false {
		i := -1
	}
	i = i + 1
}
\end{lstlisting}
\end{minipage}
\end{center}
