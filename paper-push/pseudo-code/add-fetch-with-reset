variables:

  shared: barrier1 := numThreads
          barrier2 := numThreads
          barrier3 := 0                     // 'not resetted'

code per thread/process:


  if barrier3 = 0 {                         // if barrier3 is not resetted

    atomic{barrier1 := barrier1 - 1};
    while barrier1 != 0 {}

    barrier3 = numThreads                   // reset barrier3

  } else if barrier1 = 0 {                  // if barrier1 is not resetted

    atomic{barrier2 := barrier2 - 1};
    while barrier2 != 0 {}

    barrier1 = numThreads                   // reset barrier1

  } else if barrier2 = 0 {                  // if barrier2 is not resetted

    atomic{barrier3 := barrier3 - 1};
    while barrier3 != 0 {}

    barrier2 = numThreads                   // reset barrier2

  }

// implementations/remember-others-and-add-fetch-rapl/main.c search for "add fetch barrier { "
